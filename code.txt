ssh root@103.75.183.65
0908
scp .\package.json root@103.75.183.65:/root/xbot/
scp .\package-lock.json root@103.75.183.65:/root/xbot/
scp .\i18n.js root@103.75.183.65:/root/xbot/
scp .\index.js root@103.75.183.65:/root/xbot/
scp -r .\locales root@103.75.183.65:/root/xbot/
scp .\database.js root@103.75.183.65:/root/xbot/
scp .\scienceQuestions.js root@103.75.183.65:/root/xbot/
scp .\.gitignore root@103.75.183.65:/root/xbot/
scp .\db.json root@103.75.183.65:/root/xbot/

scp .\.env root@103.75.183.65:/root/xbot/

pm2 restart xbot
pm2 stop xbot
pm2 logs xbot
pm2 start index.js --name xbot
pm2 start yarn --name xbot -- start
pm2 status
pm2 save
pm2 startup
cd /root/xbot
ls -l
mkdir xbot

npm install ethers node-telegram-bot-api dotenv
npm install pm2 -g
npm install @google/genai
npm install axios

pm2 logs xbot --lines 100

# Lệnh này di chuyển tất cả file và thư mục dự án vào thư mục mới
mv banmao.db BanmaoRPS_ABI.json database.js db.json exec_recipe.log i18n.js index.js locales/ node_modules/ package.json package-lock.json recipe_*.log xbot/
# Di chuyển thư mục .git (lịch sử git) và file .gitignore
# (Nếu báo lỗi "No such file" cho .gitignore hoặc .env cũng không sao)
mv .git .gitignore .env xbot/

(Kill) tất cả các bot cũ
Lệnh này sẽ "giết" tất cả các tiến trình node (bao gồm cả con bot "zombie" đang bị treo).

pkill node

Mở Firewall (Rất quan trọng)
DApp (frontend) của bạn cần gọi đến API (ví dụ: cổng 3000). Bạn phải mở cổng này trên firewall của VPS.

Bash

# Nếu dùng ufw (phổ biến trên Ubuntu)
sudo ufw allow 3000/tcp
sudo ufw enable
sudo ufw status
Bây giờ, DApp của bạn có thể gọi đến http://YOUR_SERVER_IP:3000/api/generate-token.

cần cài đặt npm (và thường là Node.js) theo hướng dẫn sau:

Lưu ý quan trọng: Lệnh trên có thể cài đặt phiên bản Node.js cũ hơn. Để có phiên bản Node.js mới nhất (thường là tốt hơn cho các ứng dụng hiện đại), bạn nên cài đặt theo cách sau (sử dụng NodeSource):

Thêm kho lưu trữ NodeSource (ví dụ: cho Node.js 20 LTS):

curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
Cài đặt Node.js và npm:

sudo apt-get install -y nodejs
Kiểm tra lại cài đặt
Sau khi cài đặt xong, hãy xác minh phiên bản:

Bash

node -v
npm -v